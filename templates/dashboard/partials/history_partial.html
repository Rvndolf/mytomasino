<!-- dashboard/history.html (partial) -->
<div class="container-fluid p-4">
  <div class="row">
    <div class="col-12">
      <div class="card shadow-sm border-0 p-4">
        <h2 class="fw-bold mb-4">Recent Ticket Activity</h2>

        {% if history_entries %}
          <div class="table-responsive">
            <ul class="list-group list-group-flush">
              {% for entry in history_entries %}
                <li class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-start
                           {% if entry.ticket is None and 'deleted' in entry.action %}text-muted{% endif %}">
                  <div class="flex-grow-1 mb-2 mb-md-0">
                    <strong class="d-block">
                      {% if entry.ticket %}
                        {{ entry.ticket.title }}
                      {% else %}
                        {{ entry.ticket_title|default:"Deleted Ticket" }}
                      {% endif %}
                    </strong>
                    
                    <div class="mt-1">
                      {% if entry.new_status == 'deleted' or "deleted" in entry.action %}
                        <span class="badge bg-danger">Deleted</span>
                      {% elif entry.new_status == 'completed' %}
                        <span class="badge bg-success">Completed</span>
                      {% elif entry.new_status == 'in_progress' %}
                        <span class="badge bg-info">In Progress</span>
                      {% elif entry.new_status == 'open' %}
                        <span class="badge bg-warning text-dark">Open</span>
                      {% elif entry.new_status == 'resolved' %}
                        <span class="badge bg-primary">Resolved</span>
                      {% elif "created" in entry.action %}
                        <span class="badge bg-success">Created</span>
                      {% else %}
                        <span class="badge bg-secondary">Updated</span>
                      {% endif %}
                    </div>

                    <p class="mb-0 text-muted small mt-2">{{ entry.action }}</p>
                  </div>
                  
                  <small class="text-muted text-nowrap ms-md-3">
                    {{ entry.timestamp|date:"M d, Y h:i A" }}
                  </small>
                </li>
              {% endfor %}
            </ul>
          </div>

          <!-- Pagination (if needed) -->
          {% if is_paginated %}
            <nav aria-label="History pagination" class="mt-4">
              <ul class="pagination justify-content-center">
                {% if page_obj.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page=1">First</a>
                  </li>
                  <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                  </li>
                {% endif %}

                <li class="page-item active">
                  <span class="page-link">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                  </span>
                </li>

                {% if page_obj.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
                  </li>
                  <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
                  </li>
                {% endif %}
              </ul>
            </nav>
          {% endif %}

        {% else %}
          <div class="text-center py-5">
            <i class="bi bi-clock-history text-muted" style="font-size: 3rem;"></i>
            <p class="text-muted mt-3 mb-0">No recent activity found.</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>