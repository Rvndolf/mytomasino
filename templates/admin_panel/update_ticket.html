{% extends "admin_panel_base.html" %}
{% block content %}
<div class="container mt-4">
  <h3 class="mb-4">Update Ticket Status</h3>

  <div class="card shadow-sm p-4">
    <h5>Ticket: {{ ticket.ticket_id }} - {{ ticket.title }}</h5>
    <p><strong>Category:</strong> {{ ticket.get_category_display }}</p>
    <p><strong>Created By:</strong> {{ ticket.created_by.get_full_name|default:ticket.created_by.username }}</p>
    <p><strong>Current Status:</strong> {{ ticket.get_status_display }}</p>

    <form method="post" class="mt-3">
      {% csrf_token %}
      <div class="mb-3">
        <label for="status" class="form-label">Select New Status</label>
        <select name="status" id="status" class="form-select" required>
          {% for key, value in ticket.STATUS_CHOICES %}
          <option value="{{ key }}" {% if ticket.status == key %}selected{% endif %}>{{ value }}</option>
          {% endfor %}
        </select>
      </div>

      <button type="submit" class="btn btn-primary">Update Status</button>
      <a href="{% url 'admin_panel:ticket_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
</div>
{% endblock %}
